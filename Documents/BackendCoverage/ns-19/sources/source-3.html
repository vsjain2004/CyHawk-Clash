


<!DOCTYPE html>
<html id="htmlId">
<head>
  <meta http-equiv="Content-Type" content="text/html;charset=windows-1252"> 
  <title>Coverage Report > GetController</title>
  <style type="text/css">
    @import "../../css/coverage.css";
    @import "../../css/idea.min.css";
  </style>
  <script type="text/javascript" src="../../js/highlight.min.js"></script>
  <script type="text/javascript" src="../../js/highlightjs-line-numbers.min.js"></script>
</head>

<body>
<div class="content">
<div class="breadCrumbs">
Current scope:     <a href="../../index.html">all classes</a>
    <span class="separator">|</span>
    <a href="../index.html">com.CyHawkClash.Backend.Views</a>
</div>

<h1>Coverage Summary for Class: GetController (com.CyHawkClash.Backend.Views)</h1>

<table class="coverageStats">
<tr>
  <th class="name">Class</th>
<th class="coverageStat 
">
  Class, %
</th>
<th class="coverageStat 
">
  Method, %
</th>
<th class="coverageStat 
">
  Line, %
</th>
</tr>
<tr>
  <td class="name">GetController</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (1/1)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (23/23)
  </span>
</td>
<td class="coverageStat">
  <span class="percent">
    100%
  </span>
  <span class="absValue">
    (72/72)
  </span>
</td>
</tr>

</table>

<br/>
<br/>


<pre>
<code class="sourceCode" id="sourceCode">&nbsp;package com.CyHawkClash.Backend.Views;
&nbsp;
&nbsp;import com.CyHawkClash.Backend.Models.Achievement.Achievement;
&nbsp;import com.CyHawkClash.Backend.Models.Achievement.AchievementRepository;
&nbsp;import com.CyHawkClash.Backend.Models.Attachment.Attachment;
&nbsp;import com.CyHawkClash.Backend.Models.Attachment.AttachmentRepository;
&nbsp;import com.CyHawkClash.Backend.Models.Bullet.Bullet;
&nbsp;import com.CyHawkClash.Backend.Models.Bullet.BulletRepository;
&nbsp;import com.CyHawkClash.Backend.Models.Game.Game;
&nbsp;import com.CyHawkClash.Backend.Models.Game.GameRepository;
&nbsp;import com.CyHawkClash.Backend.Models.GameMap.GameMap;
&nbsp;import com.CyHawkClash.Backend.Models.GameMap.GameMapRepository;
&nbsp;import com.CyHawkClash.Backend.Models.GameStatistics.GameStatistics;
&nbsp;import com.CyHawkClash.Backend.Models.GameStatistics.GameStatisticsRepository;
&nbsp;import com.CyHawkClash.Backend.Models.Map.Map;
&nbsp;import com.CyHawkClash.Backend.Models.Map.MapRepository;
&nbsp;import com.CyHawkClash.Backend.Models.Objective.Objective;
&nbsp;import com.CyHawkClash.Backend.Models.Objective.ObjectiveRepository;
&nbsp;import com.CyHawkClash.Backend.Models.PlayerInGame.PlayerInGame;
&nbsp;import com.CyHawkClash.Backend.Models.PlayerInGame.PlayerInGameRepository;
&nbsp;import com.CyHawkClash.Backend.Models.PlayerInGameStatistics.PlayerInGameStatistics;
&nbsp;import com.CyHawkClash.Backend.Models.Team.Team;
&nbsp;import com.CyHawkClash.Backend.Models.Team.TeamRepository;
&nbsp;import com.CyHawkClash.Backend.Models.TeamStatistics.TeamStatistics;
&nbsp;import com.CyHawkClash.Backend.Models.TeamStatistics.TeamStatisticsRepository;
&nbsp;import com.CyHawkClash.Backend.Models.User.User;
&nbsp;import com.CyHawkClash.Backend.Models.User.UserRepository;
&nbsp;import com.CyHawkClash.Backend.Models.UserWeapon.UserWeapon;
&nbsp;import com.CyHawkClash.Backend.Models.UserWeapon.UserWeaponRepository;
&nbsp;import com.CyHawkClash.Backend.Models.UserWeaponAttachment.UserWeaponAttachment;
&nbsp;import com.CyHawkClash.Backend.Models.UserWeaponAttachment.UserWeaponAttachmentRepository;
&nbsp;import com.CyHawkClash.Backend.Models.Weapon.Weapon;
&nbsp;import com.CyHawkClash.Backend.Models.Weapon.WeaponRepository;
&nbsp;import com.CyHawkClash.Backend.Models.WeaponAttachment.WeaponAttachment;
&nbsp;import com.CyHawkClash.Backend.Models.WeaponAttachment.WeaponAttachmentRepository;
&nbsp;import com.CyHawkClash.Backend.Models.dbfunc;
&nbsp;import com.CyHawkClash.Backend.Websocket.ChatServer;
&nbsp;import io.swagger.v3.oas.annotations.Operation;
&nbsp;import io.swagger.v3.oas.annotations.media.ArraySchema;
&nbsp;import io.swagger.v3.oas.annotations.media.Content;
&nbsp;import io.swagger.v3.oas.annotations.media.ExampleObject;
&nbsp;import io.swagger.v3.oas.annotations.media.Schema;
&nbsp;import io.swagger.v3.oas.annotations.responses.ApiResponse;
&nbsp;import io.swagger.v3.oas.annotations.responses.ApiResponses;
&nbsp;import org.slf4j.Logger;
&nbsp;import org.slf4j.LoggerFactory;
&nbsp;import org.springframework.beans.factory.annotation.Autowired;
&nbsp;import org.springframework.web.bind.annotation.*;
&nbsp;
&nbsp;import java.util.ArrayList;
&nbsp;import java.util.Collection;
&nbsp;import java.util.HashMap;
&nbsp;import java.util.List;
&nbsp;
&nbsp;@RestController
<b class="fc">&nbsp;public class GetController {</b>
&nbsp;    
&nbsp;    @Autowired
&nbsp;    private AchievementRepository achievementRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private AttachmentRepository attachmentRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private GameRepository gameRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private GameMapRepository gameMapRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private GameStatisticsRepository gameStatisticsRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private MapRepository mapRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private ObjectiveRepository objectiveRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private PlayerInGameRepository playerInGameRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private UserRepository userRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private UserWeaponRepository userWeaponRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private WeaponRepository weaponRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private WeaponAttachmentRepository weaponAttachmentRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private UserWeaponAttachmentRepository userWeaponAttachmentRepository;
&nbsp;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private BulletRepository bulletRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private TeamRepository teamRepository;
&nbsp;
&nbsp;    @Autowired
&nbsp;    private TeamStatisticsRepository teamStatisticsRepository;
&nbsp;
<b class="fc">&nbsp;    private final Logger logger = LoggerFactory.getLogger(GetController.class);</b>
&nbsp;
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a user&#39;s details&quot;,
&nbsp;            description = &quot;Based on users Authentication token&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = User.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())}),
&nbsp;            @ApiResponse(responseCode = &quot;403&quot;, content = {@Content(examples = {
&nbsp;                    @ExampleObject(name = &quot;Invalid JWT&quot;, value = &quot;\&quot;User not Registered\&quot;&quot;),
&nbsp;                    @ExampleObject(name = &quot;Other error&quot;, value = &quot;\&quot;User is logged out or not Registered\&quot;&quot;)
&nbsp;            })})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/user&quot;)
&nbsp;    public User getUser(@RequestHeader(&quot;Authorization&quot;)String token) throws Exception{
<b class="fc">&nbsp;        int id = Integer.parseInt(response.decode_jwt(token));</b>
<b class="fc">&nbsp;        return userRepository.findById(id);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a list of all possible achievements&quot;,
&nbsp;            description = &quot;Get a list of all possible achievements&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(array = @ArraySchema(schema = @Schema(implementation = Achievement.class)))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/achievements&quot;)
&nbsp;    public List&lt;Achievement&gt; getAchievements(){
<b class="fc">&nbsp;        return achievementRepository.findAll();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get an achievement based on its ID&quot;,
&nbsp;            description = &quot;Get an achievement based on its ID&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = Achievement.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/achievements/{id}&quot;)
&nbsp;    public Achievement getAchievement(@PathVariable int id){
<b class="fc">&nbsp;        return achievementRepository.findById(id);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get an attachment based on its ID&quot;,
&nbsp;            description = &quot;Get an attachment based on its ID&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = Attachment.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/attachments/{id}&quot;)
&nbsp;    public Attachment getAttachment(@PathVariable int id){
<b class="fc">&nbsp;        return attachmentRepository.findById(id);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get an game based on its ID&quot;,
&nbsp;            description = &quot;Get an game based on its ID&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = Game.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/games/{id}&quot;)
&nbsp;    public Game getGame(@PathVariable int id){
<b class="fc">&nbsp;        return gameRepository.findById(id);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get the Game Statistics based on user Authentication token&quot;,
&nbsp;            description = &quot;Get the Game Statistics based on user Authentication token&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = GameStatistics.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/game_stats&quot;)
&nbsp;    public GameStatistics getGameStats(@RequestHeader(&quot;Authorization&quot;) String token) throws Exception{
<b class="fc">&nbsp;        int id = Integer.parseInt(response.decode_jwt(token));</b>
<b class="fc">&nbsp;        User user = userRepository.findById(id);</b>
<b class="fc">&nbsp;        PlayerInGame pig = playerInGameRepository.findByUserAndDeleted(user, false);</b>
<b class="fc">&nbsp;        Game game = pig.getTeam().getGame();</b>
<b class="fc">&nbsp;        return gameStatisticsRepository.findByGame(game);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get the Game Map based on the Game ID&quot;,
&nbsp;            description = &quot;Get the Game Map based on the Game ID&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = GameMap.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/game_maps/{id}&quot;)
&nbsp;    public GameMap getGameMap(@PathVariable int id){
<b class="fc">&nbsp;        return gameMapRepository.findByGame(gameRepository.findById(id));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a list of all open games&quot;,
&nbsp;            description = &quot;Get a list of all open games&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(array = @ArraySchema(schema = @Schema(implementation = Game.class)))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/games/open&quot;)
&nbsp;    public Collection&lt;Game&gt; getOpenGames(){
<b class="fc">&nbsp;        return gameRepository.findByInLobbyAndOpenAndDeleted(true, true, false);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get all PlayerInGameStatistics for the game the user is in&quot;,
&nbsp;            description = &quot;Uses Authorization header&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(examples = {
&nbsp;                    @ExampleObject(value = &quot;[&quot; +
&nbsp;                            &quot;{&quot; +
&nbsp;                            &quot;\&quot;pig_id\&quot; : 0,&quot; +
&nbsp;                            &quot;\&quot;hp\&quot; : 0,&quot; +
&nbsp;                            &quot;\&quot;x\&quot; : 0,&quot; +
&nbsp;                            &quot;\&quot;y\&quot; : 0,&quot; +
&nbsp;                            &quot;\&quot;team\&quot; : true&quot; +
&nbsp;                            &quot;}&quot; +
&nbsp;                            &quot;]&quot;)
&nbsp;            })}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())}),
&nbsp;            @ApiResponse(responseCode = &quot;403&quot;, content = {@Content(examples = {
&nbsp;                    @ExampleObject(name = &quot;Invalid JWT&quot;, value = &quot;\&quot;User not Registered\&quot;&quot;),
&nbsp;                    @ExampleObject(name = &quot;Other error&quot;, value = &quot;\&quot;User is logged out or not Registered\&quot;&quot;)
&nbsp;            })})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/pigstats&quot;)
&nbsp;    public List&lt;java.util.Map&lt;String, String&gt;&gt; getPigStatsGame(@RequestHeader(&quot;Authorization&quot;) String token) throws Exception{
<b class="fc">&nbsp;        List&lt;java.util.Map&lt;String, String&gt;&gt; toReturn = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        int id = Integer.parseInt(response.decode_jwt(token));</b>
<b class="fc">&nbsp;        User user = userRepository.findById(id);</b>
<b class="fc">&nbsp;        dbfunc db = new dbfunc();</b>
<b class="fc">&nbsp;        List&lt;PlayerInGameStatistics&gt; pigStatsList = db.getAllPIGStatsGame(user);</b>
<b class="fc">&nbsp;        for(PlayerInGameStatistics pigStat : pigStatsList){</b>
<b class="fc">&nbsp;            toReturn.add(pigStat.serialize());</b>
<b class="fc">&nbsp;        }</b>
&nbsp;        
<b class="fc">&nbsp;        return toReturn;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get the PlayerInGame associated with the user&quot;,
&nbsp;            description = &quot;Uses user&#39;s Authorization token&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = PlayerInGame.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())}),
&nbsp;            @ApiResponse(responseCode = &quot;403&quot;, content = {@Content(examples = {
&nbsp;                    @ExampleObject(name = &quot;Invalid JWT&quot;, value = &quot;\&quot;User not Registered\&quot;&quot;),
&nbsp;                    @ExampleObject(name = &quot;Other error&quot;, value = &quot;\&quot;User is logged out or not Registered\&quot;&quot;)
&nbsp;            })})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/pig_users&quot;)
&nbsp;    public PlayerInGame getPIG_user(@RequestHeader(&quot;Authorization&quot;) String token) throws Exception{
<b class="fc">&nbsp;        int id = Integer.parseInt(response.decode_jwt(token));</b>
<b class="fc">&nbsp;        return playerInGameRepository.findByUserAndDeleted(userRepository.findById(id), false);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a Map based on its ID&quot;,
&nbsp;            description = &quot;Get a Map based on its ID&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = Map.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/maps/{id}&quot;)
&nbsp;    public Map getMap(@PathVariable int id){
<b class="fc">&nbsp;        return mapRepository.findById(id);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a list of all game &#39;Objective&#39; options&quot;,
&nbsp;            description = &quot;Get a list of all game &#39;Objective&#39; options&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(array = @ArraySchema(schema = @Schema(implementation = Objective.class)))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/objs&quot;)
&nbsp;    public List&lt;Objective&gt; getObjs(){
<b class="fc">&nbsp;        return objectiveRepository.findAll();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a list of all maps given an objective&quot;,
&nbsp;            description = &quot;Get a list of all maps given an objective&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(array = @ArraySchema(schema = @Schema(implementation = Map.class)))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/map_objs/{id}&quot;)
&nbsp;    public Collection&lt;Map&gt; getMap_Obj(@PathVariable int id){
<b class="fc">&nbsp;        return mapRepository.findByObj(objectiveRepository.findById(id));</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a list of all weapons&quot;,
&nbsp;            description = &quot;Get a list of all weapons&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(array = @ArraySchema(schema = @Schema(implementation = Weapon.class)))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/weapons&quot;)
&nbsp;    public List&lt;Weapon&gt; getWeapons(){
<b class="fc">&nbsp;        return weaponRepository.findAll();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a weapon based on its ID&quot;,
&nbsp;            description = &quot;Get a weapon based on its ID&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = Weapon.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/weapons/{id}&quot;)
&nbsp;    public Weapon getWeapon(@PathVariable int id){
<b class="fc">&nbsp;        return weaponRepository.findById(id);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a list of all weapons owned by the user&quot;,
&nbsp;            description = &quot;Uses Authorization token in header&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(array = @ArraySchema(schema = @Schema(implementation = UserWeapon.class)))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())}),
&nbsp;            @ApiResponse(responseCode = &quot;403&quot;, content = {@Content(examples = {
&nbsp;                    @ExampleObject(name = &quot;Invalid JWT&quot;, value = &quot;\&quot;User not Registered\&quot;&quot;),
&nbsp;                    @ExampleObject(name = &quot;Other error&quot;, value = &quot;\&quot;User is logged out or not Registered\&quot;&quot;)
&nbsp;            })})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/user_weapons&quot;)
&nbsp;    public Collection&lt;java.util.Map&lt;String, String&gt;&gt; getUserWeapons(@RequestHeader(&quot;Authorization&quot;) String token) throws Exception{
<b class="fc">&nbsp;        Collection&lt;java.util.Map&lt;String,String&gt;&gt; toReturn = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        int id = Integer.parseInt(response.decode_jwt(token));</b>
&nbsp;//        logger.info(&quot;UserID: &quot;+id);
<b class="fc">&nbsp;        User user = userRepository.findById(id);</b>
<b class="fc">&nbsp;        Collection&lt;UserWeapon&gt; userWeapons = userWeaponRepository.findByUser(user);</b>
<b class="fc">&nbsp;        for(UserWeapon userWeapon : userWeapons){</b>
<b class="fc">&nbsp;            toReturn.add(userWeapon.serialize());</b>
<b class="fc">&nbsp;        }</b>
&nbsp;//        logger.info(toReturn.toString());
<b class="fc">&nbsp;        return toReturn;</b>
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/user_weapon&quot;)
&nbsp;    public java.util.Map&lt;String, String&gt; getUserWeapon(@RequestHeader(&quot;Authorization&quot;) String token) throws Exception{
<b class="fc">&nbsp;        int id = Integer.parseInt(response.decode_jwt(token));</b>
<b class="fc">&nbsp;        User user = userRepository.findById(id);</b>
<b class="fc">&nbsp;        UserWeapon userWeapon = userWeaponRepository.findByUserAndEquipped(user, true);</b>
<b class="fc">&nbsp;        java.util.Map&lt;String, String&gt; toReturn = userWeapon.serialize();</b>
<b class="fc">&nbsp;        return toReturn;</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a list of all possible Weapon Attachments&quot;,
&nbsp;            description = &quot;Get a list of all possible Weapon Attachments&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(array = @ArraySchema(schema = @Schema(implementation = WeaponAttachment.class)))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/weapon_attachments&quot;)
&nbsp;    public List&lt;WeaponAttachment&gt; getWeaponAttachments(){
<b class="fc">&nbsp;        return weaponAttachmentRepository.findAll();</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a Weapon Attachment based on its ID&quot;,
&nbsp;            description = &quot;Get a Weapon Attachment based on its ID&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(schema = @Schema(implementation = WeaponAttachment.class))}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/weapon_attachments/{id}&quot;)
&nbsp;    public WeaponAttachment getWeaponAttachment(@PathVariable int id){
<b class="fc">&nbsp;        return weaponAttachmentRepository.findById(id);</b>
&nbsp;    }
&nbsp;
&nbsp;    @Operation(
&nbsp;            summary = &quot;Get a User&#39;s Weapon Attachment based on the User&#39;s Weapon&#39;s ID&quot;,
&nbsp;            description = &quot;Get a User&#39;s Weapon Attachment based on the User&#39;s Weapon&#39;s ID&quot;
&nbsp;    )
&nbsp;    @ApiResponses({
&nbsp;            @ApiResponse(responseCode = &quot;200&quot;, content = {@Content(examples = {
&nbsp;                        @ExampleObject(value = &quot;[&quot; +
&nbsp;                                &quot;{&quot; +
&nbsp;                                &quot;\&quot;id\&quot; : 0,&quot; +
&nbsp;                                &quot;\&quot;name\&quot; : \&quot;string\&quot;,&quot; +
&nbsp;                                &quot;\&quot;fire_rate\&quot; : 0,&quot; +
&nbsp;                                &quot;\&quot;num_max_bullets\&quot; : 0,&quot; +
&nbsp;                                &quot;\&quot;bullet_size\&quot; : 0,&quot; +
&nbsp;                                &quot;\&quot;reload_rate\&quot; : 0,&quot; +
&nbsp;                                &quot;\&quot;weapon_range\&quot; : 0,&quot; +
&nbsp;                                &quot;\&quot;bullet_speed\&quot; : 0,&quot; +
&nbsp;                                &quot;\&quot;damage\&quot; : 0,&quot; +
&nbsp;                                &quot;\&quot;accuracy\&quot; : 0&quot; +
&nbsp;                                &quot;}&quot; +
&nbsp;                                &quot;]&quot;)
&nbsp;            })}),
&nbsp;            @ApiResponse(responseCode = &quot;400&quot;, content = {@Content(schema = @Schema())})
&nbsp;    })
&nbsp;    @GetMapping(&quot;/user_weapon_attachments/{user_weapon_id}&quot;)
&nbsp;    public Collection&lt;java.util.Map&lt;String, String&gt;&gt; getUserWeaponAttachments(@PathVariable int user_weapon_id){
<b class="fc">&nbsp;        Collection&lt;java.util.Map&lt;String,String&gt;&gt; userWeaponAttachments = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        Collection&lt;UserWeaponAttachment&gt; userWeaponCollection = userWeaponAttachmentRepository.findByUserWeapon(userWeaponRepository.findById(user_weapon_id));</b>
<b class="fc">&nbsp;        for(UserWeaponAttachment userWeapon : userWeaponCollection){</b>
<b class="fc">&nbsp;            userWeaponAttachments.add(userWeapon.serialize());</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return userWeaponAttachments;</b>
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/bullets&quot;)
&nbsp;    public Collection&lt;Bullet&gt; getBullets(@RequestHeader(&quot;Authorization&quot;) String token) throws Exception {
<b class="fc">&nbsp;        int id = Integer.parseInt(response.decode_jwt(token));</b>
<b class="fc">&nbsp;        User user = userRepository.findById(id);</b>
<b class="fc">&nbsp;        dbfunc db = new dbfunc();</b>
<b class="fc">&nbsp;        List&lt;PlayerInGame&gt; playerInGames = db.getAllPIGGame(user);</b>
<b class="fc">&nbsp;        Collection&lt;Bullet&gt; bullets = new ArrayList&lt;&gt;();</b>
<b class="fc">&nbsp;        for(PlayerInGame playerInGame : playerInGames){</b>
<b class="fc">&nbsp;            Collection&lt;Bullet&gt; bulletCollection = bulletRepository.findByPlayerInGameAndDeleted(playerInGame, false);</b>
<b class="fc">&nbsp;            bullets.addAll(bulletCollection);</b>
<b class="fc">&nbsp;        }</b>
<b class="fc">&nbsp;        return bullets;</b>
&nbsp;    }
&nbsp;
&nbsp;    @GetMapping(&quot;/team_stats&quot;)
&nbsp;    public Collection&lt;TeamStatistics&gt; getTeamStats(@RequestHeader(&quot;Authorization&quot;) String token) throws Exception{
<b class="fc">&nbsp;        Collection&lt;TeamStatistics&gt; toReturn = new ArrayList&lt;&gt;();</b>
&nbsp;
<b class="fc">&nbsp;        int id = Integer.parseInt(response.decode_jwt(token));</b>
<b class="fc">&nbsp;        User user = userRepository.findById(id);</b>
<b class="fc">&nbsp;        PlayerInGame pig = playerInGameRepository.findByUserAndDeleted(user, false);</b>
<b class="fc">&nbsp;        Game game = pig.getTeam().getGame();</b>
<b class="fc">&nbsp;        Collection&lt;Team&gt; teams = teamRepository.findByGameAndDeleted(game, false);</b>
<b class="fc">&nbsp;        for(Team team : teams){</b>
<b class="fc">&nbsp;            toReturn.add(teamStatisticsRepository.findByTeamAndDeleted(team, false));</b>
<b class="fc">&nbsp;        }</b>
&nbsp;
<b class="fc">&nbsp;        return toReturn;</b>
&nbsp;    }
&nbsp;
&nbsp;}
</code>
</pre>
</div>

<script type="text/javascript">
(function() {
    var msie = false, msie9 = false;
    /*@cc_on
      msie = true;
      @if (@_jscript_version >= 9)
        msie9 = true;
      @end
    @*/

    if (!msie || msie && msie9) {
      hljs.highlightAll()
      hljs.initLineNumbersOnLoad();
    }
})();
</script>

<div class="footer">
    
    <div style="float:right;">generated on 2023-12-06 14:48</div>
</div>
</body>
</html>
